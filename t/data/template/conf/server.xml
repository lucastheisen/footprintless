<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE jndi-resources [
  <!ENTITY jndi-resources SYSTEM "jndi-resources.xml">
]>

<!-- GENERATED BY T, DO NOT EDIT -->

<Server port="${T{foo.tomcat.shutdown.port:26005}}" shutdown="${T{foo.tomcat.shutdown.password:SHUTDOWN}}">
  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener SSLEngine="on" className="org.apache.catalina.core.AprLifecycleListener"/>
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener"/>
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener"/>
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"/>
  <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener"/>

  <GlobalNamingResources>
    &jndi-resources;
  </GlobalNamingResources>

  <Service name="Catalina">${T_perl{
$port = property('foo.tomcat.http.port');
$protocol = default('foo.tomcat.http.protocol:HTTP/1.1');
$redirect_port = property('foo.tomcat.http.redirectPort');
$connection_timeout = default('foo.tomcat.http.connectionTimeout:20000');
$port
? "\n    <Connector port=\"$port\"" .
  " protocol=\"$protocol\"" .
  ($redirectPort ? " redirectPort=\"$redirect_port\"" : '') .
  " connectionTimeout=\"$connection_timeout\" />"
: ''}}${T_perl{
$port = property('foo.tomcat.ajp.port');
$protocol = default('foo.tomcat.ajp.protocol:AJP/1.3');
$redirect_port = property('foo.tomcat.ajp.redirectPort');
$connection_timeout = default('foo.tomcat.ajp.connectionTimeout:20000');
$port
? "\n    <Connector port=\"$port\"" .
  " protocol=\"$protocol\"" .
  ($redirectPort ? " redirectPort=\"$redirect_port\"" : '') .
  " connectionTimeout=\"$connection_timeout\" />"
: ''}}

    <Engine defaultHost="localhost" name="Catalina">
      <Host appBase="webapps" autoDeploy="true" name="localhost" 
        unpackWARs="true" copyXML="true" deployXML="true">
        <Valve className="org.apache.catalina.valves.AccessLogValve" 
          directory="logs" pattern="%h %l %u %t &quot;%r&quot; %s %b" 
          prefix="localhost_access_log." resolveHosts="false" suffix=".txt"/>
      </Host>
    </Engine>
  </Service>
</Server>
